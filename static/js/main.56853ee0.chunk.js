(this.webpackJsonprelease_calendar=this.webpackJsonprelease_calendar||[]).push([[0],{49:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(26),i=a.n(s),u=a(27),o=a(6),l=a(28),d=a(29),j=a(55),b=a(54),p=a(7),h=a.n(p),f=a(25),O=a(19),m=a(16),x=a(18),v=a(95),g=a(100),y=a(96),w=a(93),k=a(94),N=a(97),D=a(98),C=a(53),R=a(99),M=a(101),S=a(22),L=a.n(S),_="71fed632d4534bfea69e3d18c9926374",E="yyyy-MM-dd",q=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"requestMonthGames",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,r,c,s,i,u,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.a(w.a(t),E),n=g.a(k.a(t),E),r=function(e){return L.a.get("https://api.rawg.io/api/games?key=".concat(_),{headers:{"Content-Type":"application/json"},params:{platforms:"4",dates:"".concat(a,",").concat(n),ordering:"-added",page_size:40,page:e},timeout:3e3})},e.prev=3,c=[],s=function(e){c=[].concat(Object(f.a)(c),Object(f.a)(e.data.results))},e.next=8,r(1);case 8:if(i=e.sent,s(i),!((u=i.data.count)>=80)){e.next=16;break}return e.next=14,r(2);case 14:o=e.sent,s(o);case 16:if(!(u>=120)){e.next=21;break}return e.next=19,r(3);case 19:l=e.sent,s(l);case 21:return e.abrupt("return",c);case 24:return e.prev=24,e.t0=e.catch(3),e.abrupt("return","ERROR");case 27:case"end":return e.stop()}}),e,null,[[3,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDayGames",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("https://api.rawg.io/api/games?key=".concat(_),{headers:{"Content-Type":"application/json"},params:{platforms:"4",dates:"".concat(t,",").concat(t),ordering:"-added",page_size:40},timeout:3e3});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","ERROR");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"requestStoresInfo",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("https://api.rawg.io/api/games/".concat(t,"/stores?key=").concat(_),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestGameInfo",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("https://api.rawg.io/api/games/".concat(t,"?key=").concat(_),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestGameTrailers",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("https://api.rawg.io/api/games/".concat(t,"/movies?key=").concat(_),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),G=a(10),I=function(e){return e.gamesData},T=a(32),A=a(39),z=Object(A.b)({name:"gameData",initialState:{data:null,meta:null},reducers:{recordData:function(e,t){var a=t.data,n=a.count,r=a.next,c=a.previous,s=a.results;e.data=s,e.meta={count:n,next:r,previous:c}}}}),F=Object(G.c)({gamesData:z.reducer}),J=z.actions.recordData,B=Object(A.a)({reducer:F}),H=function(e){var t=e.prevMonthCallback,a=e.nextMonthCallback,r=e.currentLocale,c=e.currentMonth;return Object(n.jsxs)("div",{className:"header row flex-middle",children:[Object(n.jsx)("div",{className:"col col-start",children:Object(n.jsx)("div",{className:"icon",onClick:t,children:"chevron_left"})}),Object(n.jsx)("div",{className:"col col-center",children:Object(n.jsx)("span",{children:g.a(c,"LLLL yyyy",{locale:r})})}),Object(n.jsx)("div",{className:"col col-end",children:Object(n.jsx)("div",{className:"icon",onClick:a,children:"chevron_right"})})]})},K=a(52),P=a.n(K),Q=function(){return Object(n.jsx)(P.a,{type:"spin",color:"blue",className:"loading",height:20,width:20})},U=function(e){var t=e.rows,a=e.onDateClick;return Object(r.useMemo)((function(){return t.length>0?Object(n.jsx)("div",{className:"body",children:t.map((function(e,t){return Object(n.jsx)("div",{className:"row",children:e.map((function(e){var t=e.isDisabled,r=e.day,c=e.formattedDate,s=e.data,i=e.isLoading;return Object(n.jsxs)("div",{className:"col cell ".concat(t?"disabled":""),onClick:function(){a(g.a(r,E))},children:[Object(n.jsx)("span",{className:"number",children:c}),i&&Object(n.jsx)(Q,{}),s&&s.map((function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("span",{className:"game-title ".concat(e.added>5&&"game-title-heavy"),children:e.name})},e.name)}))]},String(r))}))},t)}))}):Object(n.jsx)(Q,{})}),[t])};var V=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current},W=Object(T.b)((function(e){return{gamesData:I(e)}}),(function(e){return Object(G.b)({recordData:J},e)}))((function(){var e=Object(r.useState)(new Date),t=Object(x.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(M.a),i=Object(x.a)(s,1)[0],u=Object(r.useState)([]),l=Object(x.a)(u,2),d=l[0],j=l[1],b=Object(r.useState)([]),p=Object(x.a)(b,2),S=p[0],L=p[1],_=Object(r.useState)(!1),G=Object(x.a)(_,2),I=G[0],T=G[1],A=Object(r.useState)(!1),z=Object(x.a)(A,2),F=z[0],J=z[1],B=Object(o.g)(),K=V(a);Object(r.useEffect)((function(){P(),Q()}),[]),Object(r.useEffect)((function(){!I&&S.length>0&&W(),a!==K&&(P(),Q())}),[a,S]);var P=function(){for(var e=[],t=v.a(a),n=0;n<7;n++)e.push(g.a(y.a(t,n),"iiii",{locale:i}));j(e)},Q=function(){for(var e=w.a(a),t=k.a(e),n=v.a(e),r=N.a(t),c=[],s=[],i=n,u="";i<=r;){for(var o=0;o<7;o++){u=g.a(i,"d");var l=i;s.push({day:l,formattedDate:u,isDisabled:!D.a(i,e),data:null,isLoading:D.a(i,e)}),i=y.a(i,1)}c.push(s),s=[]}L(c)},W=function(){var e=Object(m.a)(h.a.mark((function e(){var t,n,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),J(!0),e.next=4,q.requestMonthGames(a);case 4:if("ERROR"!==(t=e.sent)){e.next=8;break}return J(!1),e.abrupt("return",new Error("LOADING FAILED"));case 8:for(n=0;n<S.length;n++)for(r=S[n],c=function(e){var a=Object(O.a)({},r[e]);if(!a.isDisabled){a.isLoading=!1,a.data=t.filter((function(e){return g.a(a.day,E)===e.released})).slice(0,5);var c=Object(f.a)(S);c[n][e]=a,L(c)}},s=0;s<r.length;s++)c(s);J(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"calendar",children:[Object(n.jsx)(H,{currentLocale:i,currentMonth:a,nextMonthCallback:function(){F||(c(C.a(a,1)),L([]),T(!1),J(!1))},prevMonthCallback:function(){F||(c(R.a(a,1)),L([]),T(!1),J(!1))}}),Object(n.jsx)("div",{className:"days row",children:d.length>0&&d.map((function(e){return Object(n.jsx)("div",{className:"col col-center",children:e},String(e))}))}),Object(n.jsx)(U,{rows:S,onDateClick:function(e){B.push("/day/:".concat(e))}})]})})),X=(a(49),function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{children:Object(n.jsxs)("div",{id:"logo",children:[Object(n.jsx)("span",{className:"icon",children:"date_range"}),Object(n.jsxs)("span",{children:["Release ",Object(n.jsx)("b",{children:"calendar"})]})]})}),Object(n.jsx)("div",{className:"calendar-wrap",children:Object(n.jsx)(W,{})})]})}}]),a}(r.Component)),Y=(a(89),function(){var e=Object(r.useState)([]),t=Object(x.a)(e,2),a=t[0],c=t[1],s=Object(o.h)().currentDate;Object(r.useEffect)((function(){i(s)}),[]);var i=function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.requestDayGames(t.slice(1));case 2:"ERROR"!==(a=e.sent)&&c(a.data.results);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(h.a.mark((function e(t,n){var r,s,i,u,o,l,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.requestGameInfo(t);case 2:return r=e.sent,e.next=5,q.requestStoresInfo(n);case 5:s=e.sent,i=r.data,u=i.description_raw,o=i.stores,l=s.data.results.map((function(e){var t=o.find((function(t){return t.store.id===e.store_id}));return t?Object(O.a)(Object(O.a)({},t),e):e})),d=a.map((function(e){return e.id===t?Object(O.a)(Object(O.a)({},e),{},{description:u,stores:l,withDetails:!0}):e})),c(d);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{children:Object(n.jsxs)("div",{id:"logo",children:[Object(n.jsx)("span",{className:"icon",children:"date_range"}),Object(n.jsxs)("span",{children:["Release ",Object(n.jsx)("b",{children:"calendar"})]})]})}),Object(n.jsxs)("div",{className:"calendar-wrap",children:[Object(n.jsx)("div",{className:"heading-wrap",children:Object(n.jsx)("h2",{className:"date-title",children:s.slice(1)})}),Object(n.jsx)("div",{className:"games-list-wrap",children:a.map((function(e){var t=e.name,r=e.id,s=e.background_image,i=e.added,o=e.genres,l=e.metacritic,d=e.stores,j=e.description,b=e.slug,p=(e.trailers,e.storeLinks,e.withDetails);return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"game-item",children:[Object(n.jsx)("img",{className:"game-image",src:s,alt:"gameimage"}),Object(n.jsxs)("div",{className:"game-info",children:[Object(n.jsx)("p",{className:"game-title",children:t}),Object(n.jsxs)("p",{className:"game-extra-text",children:["\u0417\u0430\u0446\u0456\u043a\u0430\u0432\u0438\u043b\u043e\u0441\u044c: ",Object(n.jsx)("span",{className:"game-title",children:i})]}),o&&Object(n.jsxs)("p",{children:["\u0416\u0430\u043d\u0440\u0438: ",o.map((function(e){return Object(n.jsxs)("span",{children:[e.name," "]},e.id)}))]}),l&&Object(n.jsxs)("p",{children:["Metacritic: ",l]}),d&&Object(n.jsxs)("p",{children:["\u041c\u0430\u0433\u0430\u0437\u0438\u043d\u0438: ",d.map((function(e){return e.name?Object(n.jsxs)("span",{children:["".concat(null===e||void 0===e?void 0:e.name," ")," "]},e.name):Object(n.jsx)("a",{rel:"noreferrer",target:"_blank",href:e.url,children:"".concat(e.store.name," ")},e.store.name)}))]}),Object(n.jsx)("button",{className:"button-load",onClick:function(){p?function(e){var t=a.map((function(t){return t.id===e?Object(O.a)(Object(O.a)({},t),{},{description:null,stores:null,trailers:null,withDetails:!1}):t}));c(t)}(r):u(r,b)},children:p?"\u043f\u0440\u0438\u0445\u043e\u0432\u0430\u0442\u0438 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044e":"\u0411\u0456\u043b\u044c\u0448\u0435 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457"})]})]}),j&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{children:"\u041e\u043f\u0438\u0441"}),Object(n.jsx)("p",{children:j})]})]},r)}))})]})]})}),Z=function(){return Object(n.jsx)(u.a,{children:Object(n.jsxs)(o.d,{children:[Object(n.jsx)(o.b,{exact:!0,path:"/",children:Object(n.jsx)(X,{})}),Object(n.jsx)(o.b,{path:"/day/:currentDate",children:Object(n.jsx)(Y,{})}),Object(n.jsx)(o.a,{to:"/"})]})})};a(90);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(T.a,{store:B,children:Object(n.jsx)(Z,{})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.56853ee0.chunk.js.map